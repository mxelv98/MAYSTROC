<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MAYSTRO CRASH</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Cairo and Inter are already there, adding Press Start 2P for game score look -->
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@600&family=Inter:wght@400;600;700&family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        /* New Base styles for the professional theme */
        body {
            font-family: 'Inter', 'Cairo', sans-serif;
            background: #000000; /* Solid black background */
            color: #E0E0E0; /* Light grey for general text */
            overflow: hidden; /* Prevent scrolling during splash screen */
        }

        /* General button style */
        .button-base {
            padding: 1rem 2.5rem;
            border-radius: 0.75rem;
            font-weight: 700;
            font-size: 1.125rem;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            letter-spacing: 0.05em; /* Slightly increased letter spacing for modern look */
            white-space: nowrap; /* Prevent text wrapping */
        }

        /* Default action button (Update Result) and AI buttons */
        .action-button-gradient {
            background-image: linear-gradient(to right, #7acd07, #9ffd09); /* New Green gradient */
            color: #1A1A1A; /* Dark text for contrast on green */
            box-shadow: 0 6px 20px rgba(159, 253, 9, 0.4); /* Matching green shadow */
            border: 1px solid rgba(159, 253, 9, 0.3); /* Subtle green border */
        }
        .action-button-gradient:hover {
            box-shadow: 0 8px 25px rgba(159, 253, 9, 0.6);
            transform: translateY(-3px);
        }
        .action-button-gradient:active {
            transform: translateY(0);
            box-shadow: 0 4px 10px rgba(159, 253, 9, 0.3);
            transform: scale(0.98);
        }

        /* Disabled button style for cooldown */
        .cooldown-button {
            background-image: linear-gradient(to right, #2A2A2A, #3A3A3A); /* Darker grey for disabled state */
            color: #888888; /* Muted grey text color */
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            cursor: not-allowed;
            opacity: 0.7;
            border: 1px solid #4A4A4A; /* Darker subtle border */
        }
        .cooldown-button:hover {
            transform: none;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }
        .cooldown-button:active {
            transform: none;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        /* Box styling */
        .box-container {
            background-color: #1E1E1E; /* Slightly lighter than body for depth */
            padding: 2.5rem;
            border-radius: 1.25rem;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.5); /* Deeper, more diffused shadow */
            border: 1px solid rgba(255, 255, 255, 0.05); /* Very subtle border */
        }

        /* Main title animation */
        .title-pulse {
            animation: pulse-glow-new 2s infinite ease-in-out;
        }
        @keyframes pulse-glow-new {
            0%, 100% { text-shadow: 0 0 10px rgba(159, 253, 9, 0.7); } /* New Green glow */
            50% { text-shadow: 0 0 20px rgba(159, 253, 9, 1); } /* New Green glow */
        }

        /* Loading spinner */
        .loading-spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top: 4px solid #9ffd09; /* Matching new accent color */
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Splash screen logo animation */
        @keyframes bounce-slow {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }
        .animate-bounce-slow {
            animation: bounce-slow 2s infinite ease-in-out;
        }

        /* Main content entrance animation */
        @keyframes fade-slide-in {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-slide-in-active {
            animation: fade-slide-in 0.8s ease-out forwards;
        }

        /* Result labels update animation */
        @keyframes pop-in {
            0% { opacity: 0; transform: scale(0.9); }
            100% { opacity: 1; transform: scale(1); }
        }
        .label-update-animation {
            animation: pop-in 0.4s ease-out;
        }

        /* Icon change animation */
        @keyframes icon-fade-in {
            from { opacity: 0; transform: scale(0.8); }
            to { opacity: 1; transform: scale(1); }
        }
        .icon-animation {
            animation: icon-fade-in 0.5s ease-out;
        }

        /* Warning Modal Styles */
        .warning-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7); /* Dark semi-transparent overlay */
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 100; /* Above splash screen */
            opacity: 0; /* Start hidden */
            transition: opacity 0.3s ease-in-out;
        }
        .warning-modal-content {
            background-color: #1E1E1E;
            padding: 2.5rem;
            border-radius: 1.25rem;
            box-shadow: 0 0 40px rgba(159, 253, 9, 0.4); /* New Green glow */
            text-align: center;
            max-width: 90%;
            width: 400px;
            transform: translateY(-20px); /* Start slightly above */
            transition: transform 0.3s ease-in-out;
        }
        .warning-modal-overlay.show {
            opacity: 1;
        }
        .warning-modal-overlay.show .warning-modal-content {
            transform: translateY(0);
        }
        .telegram-link {
            color: #9ffd09; /* Match accent color */
            text-decoration: none;
            font-weight: 600;
            transition: color 0.2s ease-in-out;
        }
        .telegram-link:hover {
            color: #7acd07; /* Slightly darker green on hover */
            text-decoration: underline;
        }
        .main-title-logo {
            width: 5rem; /* Increased size for main title logo */
            height: 5rem; /* Increased size for main title logo */
            display: inline-block;
            vertical-align: middle;
            margin-left: 1rem; /* Adjusted space */
        }
        .input-field {
            background-color: #0A0A0A;
            border: 1px solid #4A4A4A;
            color: #E0E0E0;
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            width: 100%;
            box-sizing: border-box;
            margin-top: 0.5rem;
            font-size: 1rem;
        }
        .input-field:focus {
            outline: none;
            border-color: #9ffd09;
            box-shadow: 0 0 0 3px rgba(159, 253, 9, 0.3);
        }
        /* Style for the game score font */
        .game-score-font {
            font-family: 'Press Start 2P', cursive;
            /* Adjust font size and line height to fit well */
            font-size: 1.8rem; /* Example size, adjust as needed */
            line-height: 1.2;
        }
        /* Adjust for smaller screens if Press Start 2P is too large */
        @media (max-width: 768px) {
            .game-score-font {
                font-size: 1.3rem; /* Smaller size for mobile */
            }
        }
        @media (max-width: 480px) {
            .game-score-font {
                font-size: 1rem; /* Even smaller for very small screens */
            }
        }
        .telegram-logo-link {
            display: flex; /* Use flexbox to center content */
            justify-content: center; /* Center horizontally */
            align-items: center; /* Center vertically */
            margin-top: 2rem; /* More space above the logo */
            flex-direction: column; /* Stack text and image vertically */
            gap: 0.5rem; /* Space between text and image */
        }
        .telegram-logo {
            width: 60px; /* Slightly larger logo */
            height: 60px; /* Slightly larger logo */
            transition: transform 0.2s ease-in-out;
        }
        .telegram-logo:hover {
            transform: scale(1.1); /* Slight zoom on hover */
        }
    </style>
</head>
<body>

    <!-- Splash Screen -->
    <div id="splash-screen" class="fixed inset-0 flex flex-col items-center justify-center bg-[#000000] z-50 transition-opacity duration-700 opacity-100">
        <!-- Using the provided image for the logo -->
        <img src="logo.png" alt="App Logo" class="w-36 h-36 rounded-full mb-6 animate-bounce-slow">
        <!-- Removed h1 and p tags -->
    </div>

    <!-- Warning Modal -->
    <div id="warning-modal" class="warning-modal-overlay hidden">
        <div class="warning-modal-content">
            <h3 class="text-2xl font-bold text-[#9ffd09] mb-4">âš ï¸ ØªÙ†Ø¨ÙŠÙ‡ Ù‡Ø§Ù… âš ï¸</h3>
            <p class="text-lg text-gray-300 mb-2">
                ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù‡Ø°Ø§ Ø§Ù„Ø³ÙƒØ±ÙŠØ¨Øª ÙÙ‚Ø· Ù…Ø¹ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯ ÙˆØ¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„ØªØ±ÙˆÙŠØ¬ÙŠ <span class="text-[#9ffd09] font-bold">MAS98</span>.
            </p>
            <p class="text-lg text-gray-300 mb-4">
                ÙŠÙ…ÙƒÙ†Ùƒ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ÙƒÙ„ Ø¯Ù‚ÙŠÙ‚ØªÙŠÙ†. Ø¥Ø°Ø§ ÙƒØ§Ù† Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ VIPØŒ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ØªØ­Ø¯ÙŠØ« ÙÙŠ ÙƒÙ„ Ø¬ÙˆÙ„Ø©.
            </p>
            <div class="mb-6">
                <label for="huntIdInput" class="block text-gray-300 text-lg mb-2">Ø£Ø¯Ø®Ù„ Ù…Ø¹Ø±ÙÙƒ (ID):</label>
                <input type="number" id="huntIdInput" placeholder="Ø£Ø¯Ø®Ù„ Ù…Ø¹Ø±ÙÙƒ Ù‡Ù†Ø§..." class="input-field" oninput="this.value = this.value.replace(/[^0-9]/g, '');">
            </div>
            <button onclick="dismissWarning()"
                    class="button-base action-button-gradient px-8 py-3 rounded-xl text-black font-semibold text-lg">
                ÙÙ‡Ù…Øª
            </button>
        </div>
    </div>

    <!-- Main Content Container (initially hidden) -->
    <div id="main-content" class="hidden flex-col items-center justify-center min-h-screen p-6 text-white text-right">

        <!-- Main Title -->
        <h2 class="text-4xl md:text-5xl font-extrabold text-[#9ffd09] mb-8 title-pulse">
            <img src="logo.png" alt="Logo" class="main-title-logo"> <span class="game-score-font">MAYSTRO CRASH</span>
        </h2>

        <!-- Hunt ID Display -->
        <div id="huntIdDisplay" class="text-xl text-gray-400 mb-4"></div>

        <!-- Simulator Box -->
        <div class="box-container w-full max-w-sm md:max-w-md lg:max-w-lg mx-auto">
            <!-- Output Labels -->
            <div id="saida" class="label text-4xl font-bold mt-4 mb-2 text-white transition-all duration-300 ease-in-out">---</div>
            <div id="grafico" class="label text-2xl text-gray-400 mb-4 transition-all duration-300 ease-in-out">---</div>

            <!-- Dynamic Result Icon -->
            <div id="result-icon-container" class="text-7xl my-6 mx-auto flex items-center justify-center h-24">
                <span id="result-icon" class="icon-animation" style="display: none;"></span>
            </div>

            <div id="posivel" class="label text-xl text-gray-400 mt-4 transition-all duration-300 ease-in-out">---</div>
            <div id="protecao" class="label text-xl text-gray-400 mt-2 transition-all duration-300 ease-in-out">---</div>

        </div>

        <!-- Control Buttons -->
        <div class="controls mt-8 flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4">
            <!-- Button to manually update results with cooldown -->
            <button id="updateResultButton" onclick="atualizarResultados()"
                    class="button-base action-button-gradient">
                <span id="updateResultButtonText">ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†ØªÙŠØ¬Ø©</span>
            </button>

            <!-- AI Buttons (now all locked) -->
            <button id="analyzeButton" onclick="showVipMessage('analysis')"
                    class="button-base cooldown-button">
                <span id="analyzeButtonText">âœ¨ ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù†ØªÙŠØ¬Ø© (VIP)</span>
                <div id="analyzeLoadingSpinner" class="loading-spinner ml-2 hidden"></div>
            </button>
            <button id="strategyTipsButton" onclick="showVipMessage('strategy')"
                    class="button-base cooldown-button">
                <span id="strategyTipsButtonText">âœ¨ Ù†ØµØ§Ø¦Ø­ Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© (VIP)</span>
                <div id="strategyTipsLoadingSpinner" class="loading-spinner ml-2 hidden"></div>
            </button>
            <button id="futurePredictionButton" onclick="showVipMessage('future')"
                    class="button-base cooldown-button">
                <span id="futurePredictionButtonText">ğŸ”® ØªÙˆÙ‚Ø¹Ø§Øª Ø§Ù„Ø¬ÙˆÙ„Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø© (VIP)</span>
                <div id="futurePredictionLoadingSpinner" class="loading-spinner ml-2 hidden"></div>
            </button>
        </div>

        <!-- Gemini API Analysis Output -->
        <div id="geminiAnalysis" class="box-container mt-8 w-full max-w-sm md:max-w-md lg:max-w-lg mx-auto text-right"
             style="min-height: 100px;">
            <h3 class="text-xl font-bold text-[#9ffd09] mb-4">ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ:</h3>
            <p id="analysisOutput" class="text-gray-300 text-lg">
                Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ "ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù†ØªÙŠØ¬Ø© (VIP)" Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ØªØ­Ù„ÙŠÙ„ Ù…Ù† Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ.
            </p>
        </div>

        <!-- Gemini API Strategy Tips Output -->
        <div id="geminiStrategyTips" class="box-container mt-8 w-full max-w-sm md:max-w-md lg:max-w-lg mx-auto text-right"
             style="min-height: 100px;">
            <h3 class="text-xl font-bold text-[#9ffd09] mb-4">Ù†ØµØ§Ø¦Ø­ Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ©:</h3>
            <p id="strategyTipsOutput" class="text-gray-300 text-lg">
                Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ "Ù†ØµØ§Ø¦Ø­ Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© (VIP)" Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù†ØµØ§Ø¦Ø­ Ù…Ù† Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ.
            </p>
        </div>

        <!-- Gemini API Future Prediction Output -->
        <div id="geminiFuturePrediction" class="box-container mt-8 w-full max-w-sm md:max-w-md lg:max-w-lg mx-auto text-right"
             style="min-height: 100px;">
            <h3 class="text-xl font-bold text-[#9ffd09] mb-4">ğŸ”® ØªÙˆÙ‚Ø¹Ø§Øª Ø§Ù„Ø¬ÙˆÙ„Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©:</h3>
            <p id="futurePredictionOutput" class="text-gray-300 text-lg">
                Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ "ØªÙˆÙ‚Ø¹Ø§Øª Ø§Ù„Ø¬ÙˆÙ„Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø© (VIP)" Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ØªÙˆÙ‚Ø¹Ø§Øª Ù…Ù† Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ.
            </p>
        </div>

        <!-- Static Diagnostic/Statistical Section -->
        <div id="staticDiagnostic" class="box-container mt-8 w-full max-w-sm md:max-w-md lg:max-w-lg mx-auto text-right">
            <h3 class="text-xl font-bold text-[#9ffd09] mb-4">ğŸ“Š Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠ:</h3>
            <ul class="text-gray-300 text-lg list-disc pr-6">
                <li class="mb-2">Ù…ØªÙˆØ³Ø· Ù†Ù‚Ø·Ø© Ø§Ù„Ø§Ù†Ù‡ÙŠØ§Ø± Ø§Ù„ØªØ§Ø±ÙŠØ®ÙŠØ©: 1.85x</li>
                <li class="mb-2">Ø§Ø­ØªÙ…Ø§Ù„ÙŠØ© Ø§Ù„Ø§Ù†Ù‡ÙŠØ§Ø± Ù‚Ø¨Ù„ 2x: Ø­ÙˆØ§Ù„ÙŠ 60%</li>
                <li class="mb-2">Ø§Ø­ØªÙ…Ø§Ù„ÙŠØ© Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ 5x Ø£Ùˆ Ø£ÙƒØ«Ø±: Ø­ÙˆØ§Ù„ÙŠ 25%</li>
                <li class="mb-2">Ø£Ø¹Ù„Ù‰ Ù†Ù‚Ø·Ø© Ø§Ù†Ù‡ÙŠØ§Ø± Ù…Ø³Ø¬Ù„Ø©: 15.78x</li>
                <li>Ø£Ø¯Ù†Ù‰ Ù†Ù‚Ø·Ø© Ø§Ù†Ù‡ÙŠØ§Ø± Ù…Ø³Ø¬Ù„Ø©: 1.01x</li>
            </ul>
            <div class="telegram-logo-link">
                <a href="https://t.me/maysttrobet" target="_blank">
                    <img src="logotl.png" alt="Telegram Logo" class="telegram-logo">
                </a>
                <span class="text-gray-400 text-sm mt-2">ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</span> <!-- Added "Contact Us" text -->
            </div>
        </div>

    </div> <!-- End of main-content -->

    <script>
        // Global variables
        let currentResultCategory = "---";
        let lastRefreshTime = 0; // Timestamp of the last refresh
        let refreshCooldownTimerId = null; // Timer for refresh button cooldown

        const DEFAULT_COOLDOWN = 120; // 2 minutes in seconds

        /**
         * Generates a random integer between min (inclusive) and max (inclusive).
         * @param {number} min - The minimum value.
         * @param {number} max - The maximum value.
         * @returns {number} A random integer.
         */
        function getRandom(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        /**
         * Applies and removes a CSS animation class to an element to trigger a re-animation.
         * @param {HTMLElement} element - The DOM element to animate.
         * @param {string} animationClass - The CSS class containing the animation.
         */
        function triggerAnimation(element, animationClass) {
            element.classList.remove(animationClass);
            void element.offsetWidth; // This line forces a reflow
            element.classList.add(animationClass);
        }

        /**
         * Updates the simulator results based on a random outcome.
         * Includes cooldown logic for the refresh button.
         */
        function atualizarResultados() {
            const now = Date.now();
            const cooldownDuration = DEFAULT_COOLDOWN;
            const timeElapsed = (now - lastRefreshTime) / 1000; // in seconds

            if (timeElapsed < cooldownDuration) {
                // If still in cooldown, prevent refresh
                updateRefreshButtonState(); // Update button to show remaining time
                return;
            }

            // Perform result update
            let Resultado = Math.random() < 0.5 ? "Rosa" : "Outro";
            currentResultCategory = Resultado;

            const saida = document.getElementById("saida");
            const grafico = document.getElementById("grafico");
            const resultIcon = document.getElementById("result-icon");
            const posivel = document.getElementById("posivel");
            const protecao = document.getElementById("protecao");

            // Ensure icon is visible before updating its content
            resultIcon.style.display = 'block';

            if (Resultado === "Rosa") {
                posivel.innerText = "ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹ 5X";
                protecao.innerText = getRandom(2, 2) + "." + getRandom(1, 59) + "X";
                saida.innerText = getRandom(2, 4) + "." + getRandom(1, 59) + "X";
                grafico.innerText = getRandom(50, 70) + "%";
                resultIcon.innerText = "âœ…";
            } else {
                posivel.innerText = "Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø®Ø·Ø±";
                protecao.innerText = getRandom(0, 1) + "." + getRandom(1, 30) + "X";
                saida.innerText = getRandom(1, 1) + "." + getRandom(1, 59) + "X";
                grafico.innerText = getRandom(40, 50) + "%";
                resultIcon.innerText = "âš ï¸";

                if (Math.random() < 0.5) {
                    posivel.innerText = "Ø§Ù„Ø®Ø·Ø± 4X";
                    protecao.innerText = getRandom(2, 2) + "." + getRandom(1, 59) + "X";
                    saida.innerText = getRandom(2, 4) + "." + getRandom(1, 59) + "X";
                    grafico.innerText = getRandom(50, 70) + "%";
                    resultIcon.innerText = "ğŸš¨";
                }

                if (Math.random() < 0.3) {
                    posivel.innerText = "Ø§Ø³ØªÙ‚Ø±Ø§Ø± 6X";
                    protecao.innerText = getRandom(2, 2) + "." + getRandom(1, 59) + "X";
                    saida.innerText = getRandom(2, 4) + "." + getRandom(1, 59) + "X";
                    grafico.innerText = getRandom(50, 70) + "%";
                    resultIcon.innerText = "ğŸ“ˆ";
                }
            }

            triggerAnimation(saida, 'label-update-animation');
            triggerAnimation(grafico, 'label-update-animation');
            triggerAnimation(posivel, 'label-update-animation');
            triggerAnimation(protecao, 'label-update-animation');
            triggerAnimation(resultIcon, 'icon-animation');

            lastRefreshTime = now; // Update last refresh time
            updateRefreshButtonState(); // Start/reset cooldown display
        }

        /**
         * Updates the state (text, disabled, styling) of the "Update Result" button based on cooldown.
         */
        function updateRefreshButtonState() {
            const updateButton = document.getElementById("updateResultButton");
            const updateButtonTextSpan = document.getElementById("updateResultButtonText");
            const cooldownDuration = DEFAULT_COOLDOWN; // Always 2 minutes
            const now = Date.now();
            const timeRemaining = Math.max(0, cooldownDuration - Math.floor((now - lastRefreshTime) / 1000));

            if (timeRemaining > 0) {
                updateButton.disabled = true;
                updateButton.classList.add('cooldown-button'); // Apply cooldown style
                updateButton.classList.remove('action-button-gradient');
                const minutes = Math.floor(timeRemaining / 60);
                const seconds = timeRemaining % 60;
                updateButtonTextSpan.innerText = `Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±: ${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                if (!refreshCooldownTimerId) {
                    refreshCooldownTimerId = setInterval(updateRefreshButtonState, 1000);
                }
            } else {
                updateButton.disabled = false;
                updateButton.classList.remove('cooldown-button');
                updateButton.classList.add('action-button-gradient');
                updateButtonTextSpan.innerText = "ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†ØªÙŠØ¬Ø©";
                clearInterval(refreshCooldownTimerId);
                refreshCooldownTimerId = null;
            }
        }

        /**
         * Displays a VIP message when a locked AI button is clicked.
         * @param {string} type - 'analysis' or 'strategy' or 'future' to determine which output area to use.
         */
        function showVipMessage(type) {
            const message = "Ù‡Ø°Ù‡ Ø§Ù„Ù…ÙŠØ²Ø© Ù…ØªØ§Ø­Ø© ÙÙ‚Ø· Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠ VIP!"; // "This feature is only available for VIP users!"
            if (type === 'analysis') {
                document.getElementById("analysisOutput").innerText = message;
            } else if (type === 'strategy') {
                document.getElementById("strategyTipsOutput").innerText = message;
            } else if (type === 'future') {
                document.getElementById("futurePredictionOutput").innerText = message;
            }
        }

        /**
         * Calls the Gemini API to analyze the current simulator results.
         */
        async function analyzeResultWithGemini() {
            const analyzeButton = document.getElementById("analyzeButton");
            const analyzeButtonText = document.getElementById("analyzeButtonText");
            const analyzeLoadingSpinner = document.getElementById("analyzeLoadingSpinner");
            const analysisOutput = document.getElementById("analysisOutput");

            // This function will now only be called if the button is NOT locked.
            // Its functionality remains the same.

            analyzeButton.disabled = true;
            analyzeButtonText.classList.add("hidden");
            analyzeLoadingSpinner.classList.remove("hidden");
            analysisOutput.innerText = "Ø¬Ø§Ø±ÙŠ ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø¨ÙˆØ§Ø³Ø·Ø© Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ...";

            const saidaValue = document.getElementById("saida").innerText;
            const graficoValue = document.getElementById("grafico").innerText;
            const posivelValue = document.getElementById("posivel").innerText;
            const protecaoValue = document.getElementById("protecao").innerText;

            const prompt = `
                Ø­Ù„Ù„ Ù†ØªØ§Ø¦Ø¬ "MAYSTRO CRASH" Ø§Ù„ØªØ§Ù„ÙŠØ© ÙˆÙ‚Ø¯Ù… Ø´Ø±Ø­Ù‹Ø§ Ù…ÙˆØ¬Ø²Ù‹Ø§ ÙˆÙ…ÙÙŠØ¯Ù‹Ø§.
                Ø§Ù„Ù†Ø§ØªØ¬ Ø§Ù„Ø­Ø§Ù„ÙŠ (Saida): ${saidaValue}
                Ø§Ù„Ù†Ø³Ø¨Ø© Ø§Ù„Ù…Ø¦ÙˆÙŠØ© Ù„Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ (Grafico): ${graficoValue}
                Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù…Ø­ØªÙ…Ù„Ø© (Posivel): ${posivelValue}
                Ø§Ù„Ø­Ù…Ø§ÙŠØ© (Protecao): ${protecaoValue}
                ÙØ¦Ø© Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©: ${currentResultCategory === "Rosa" ? "ÙˆØ±Ø¯ÙŠ (Ø¥ÙŠØ¬Ø§Ø¨ÙŠ)" : "Ø¢Ø®Ø± (Ù‚Ø¯ ÙŠÙƒÙˆÙ† Ø®Ø·ÙŠØ±Ù‹Ø§)"}

                Ø±ÙƒØ² Ø¹Ù„Ù‰ ØªÙØ³ÙŠØ± Ù‡Ø°Ù‡ Ø§Ù„Ù‚ÙŠÙ… Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø·Ø±ÙŠÙ‚Ø© Ø³Ù‡Ù„Ø© Ø§Ù„ÙÙ‡Ù…. Ø§Ø¬Ø¹Ù„ Ø§Ù„Ø´Ø±Ø­ Ù…ÙˆØ¬Ø²Ù‹Ø§ ÙˆÙÙŠ Ø­Ø¯ÙˆØ¯ 100 ÙƒÙ„Ù…Ø© ÙˆØ¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„ÙØµØ­Ù‰.
            `;

            let chatHistory = [];
            chatHistory.push({ role: "user", parts: [{ text: prompt }] });

            const payload = { contents: chatHistory };
            const apiKey = "";
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const result = await response.json();

                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const text = result.candidates[0].content.parts[0].text;
                    analysisOutput.innerText = text;
                } else {
                    analysisOutput.innerText = "Ø¹Ø°Ø±Ù‹Ø§ØŒ Ù„Ù… ÙŠØªÙ…ÙƒÙ† Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù…Ù† ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø­Ø§Ù„ÙŠÙ‹Ø§. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.";
                    console.error("Gemini API response structure unexpected:", result);
                }
            } catch (error) {
                analysisOutput.innerText = "Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§ØªØµØ§Ù„Ùƒ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª ÙˆØ§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.";
                console.error("Error calling Gemini API:", error);
            } finally {
                analyzeButton.disabled = false;
                analyzeButtonText.classList.remove("hidden");
                analyzeLoadingSpinner.classList.add("hidden");
            }
        }

        /**
         * Calls the Gemini API to get strategy tips based on the current simulator results.
         */
        async function getStrategyTipsWithGemini() {
            const strategyTipsButton = document.getElementById("strategyTipsButton");
            const strategyTipsButtonText = document.getElementById("strategyTipsButtonText");
            const strategyTipsLoadingSpinner = document.getElementById("strategyTipsLoadingSpinner");
            const strategyTipsOutput = document.getElementById("strategyTipsOutput");

            // This function will now only be called if the button is NOT locked.
            // Its functionality remains the same.

            strategyTipsButton.disabled = true;
            strategyTipsButtonText.classList.add("hidden");
            strategyTipsLoadingSpinner.classList.remove("hidden");
            strategyTipsOutput.innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù†ØµØ§Ø¦Ø­ Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Ø¨ÙˆØ§Ø³Ø·Ø© Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ...";

            const saidaValue = document.getElementById("saida").innerText;
            const graficoValue = document.getElementById("grafico").innerText;
            const posivelValue = document.getElementById("posivel").innerText;
            const protecaoValue = document.getElementById("protecao").innerText;

            const prompt = `
                Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ù†ØªØ§Ø¦Ø¬ "MAYSTRO CRASH" Ø§Ù„ØªØ§Ù„ÙŠØ©ØŒ Ù‚Ø¯Ù… 3-5 Ù†ØµØ§Ø¦Ø­ Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Ù…ÙˆØ¬Ø²Ø© ÙˆÙ…ÙÙŠØ¯Ø© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù….
                Ø§Ù„Ù†Ø§ØªØ¬ Ø§Ù„Ø­Ø§Ù„ÙŠ (Saida): ${saidaValue}
                Ø§Ù„Ù†Ø³Ø¨Ø© Ø§Ù„Ù…Ø¦ÙˆÙŠØ© Ù„Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ (Grafico): ${graficoValue}
                Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù…Ø­ØªÙ…Ù„Ø© (Posivel): ${posivelValue}
                Ø§Ù„Ø­Ù…Ø§ÙŠØ© (Protecao): ${protecaoValue}
                ÙØ¦Ø© Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©: ${currentResultCategory === "Rosa" ? "ÙˆØ±Ø¯ÙŠ (Ø¥ÙŠØ¬Ø§Ø¨ÙŠ)" : "Ø¢Ø®Ø± (Ù‚Ø¯ ÙŠÙƒÙˆÙ† Ø®Ø·ÙŠØ±Ù‹Ø§)"}

                Ø±ÙƒØ² Ø¹Ù„Ù‰ Ù†ØµØ§Ø¦Ø­ Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªØ·Ø¨ÙŠÙ‚ ÙÙŠ Ø³ÙŠØ§Ù‚ Ù„Ø¹Ø¨Ø© "Crash" (Ù…Ø«Ù„ Ù…ØªÙ‰ ÙŠØ¬Ø¨ Ø§Ù„Ø³Ø­Ø¨ØŒ Ø£Ùˆ Ø§Ù„Ù…Ø®Ø§Ø·Ø±Ø©ØŒ Ø£Ùˆ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±).
                Ø§Ø¬Ø¹Ù„ Ø§Ù„Ù†ØµØ§Ø¦Ø­ ÙÙŠ Ø´ÙƒÙ„ Ù‚Ø§Ø¦Ù…Ø© Ù†Ù‚Ø·ÙŠØ© ÙˆØ¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„ÙØµØ­Ù‰.
            `;

            let chatHistory = [];
            chatHistory.push({ role: "user", parts: [{ text: prompt }] });

            const payload = { contents: chatHistory };
            const apiKey = "";
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const result = await response.json();

                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const text = result.candidates[0].content.parts[0].text;
                    strategyTipsOutput.innerText = text;
                } else {
                    strategyTipsOutput.innerText = "Ø¹Ø°Ø±Ù‹Ø§ØŒ Ù„Ù… ÙŠØªÙ…ÙƒÙ† Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù…Ù† ØªÙ‚Ø¯ÙŠÙ… Ù†ØµØ§Ø¦Ø­ Ø­Ø§Ù„ÙŠÙ‹Ø§. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.";
                    console.error("Gemini API response structure unexpected:", result);
                }
            } catch (error) {
                strategyTipsOutput.innerText = "Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§ØªØµØ§Ù„Ùƒ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª ÙˆØ§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.";
                console.error("Error calling Gemini API:", error);
            } finally {
                strategyTipsButton.disabled = false;
                strategyTipsButtonText.classList.remove("hidden");
                strategyTipsLoadingSpinner.classList.add("hidden");
            }
        }

        /**
         * Calls the Gemini API to get future predictions based on the current simulator results.
         */
        async function getFuturePredictionWithGemini() {
            const futurePredictionButton = document.getElementById("futurePredictionButton");
            const futurePredictionButtonText = document.getElementById("futurePredictionButtonText");
            const futurePredictionLoadingSpinner = document.getElementById("futurePredictionLoadingSpinner");
            const futurePredictionOutput = document.getElementById("futurePredictionOutput");

            // This function will now only be called if the button is NOT locked.
            // Its functionality remains the same.

            futurePredictionButton.disabled = true;
            futurePredictionButtonText.classList.add("hidden");
            futurePredictionLoadingSpinner.classList.remove("hidden");
            futurePredictionOutput.innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ØªÙˆÙ‚Ø¹Ø§Øª Ø§Ù„Ø¬ÙˆÙ„Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø© Ø¨ÙˆØ§Ø³Ø·Ø© Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ§Ù‡Ø±Ø§Ø¦Ù‰...";

            const saidaValue = document.getElementById("saida").innerText;
            const graficoValue = document.getElementById("grafico").innerText;
            const posivelValue = document.getElementById("posivel").innerText;
            const protecaoValue = document.getElementById("protecao").innerText;

            const prompt = `
                Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ù†ØªØ§Ø¦Ø¬ "MAYSTRO CRASH" Ø§Ù„Ø­Ø§Ù„ÙŠØ©ØŒ Ù‚Ø¯Ù… ØªÙˆÙ‚Ø¹Ù‹Ø§ Ù…ÙˆØ¬Ø²Ù‹Ø§ Ù„Ù„Ø¬ÙˆÙ„Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©.
                Ø§Ù„Ù†Ø§ØªØ¬ Ø§Ù„Ø­Ø§Ù„ÙŠ (Saida): ${saidaValue}
                Ø§Ù„Ù†Ø³Ø¨Ø© Ø§Ù„Ù…Ø¦ÙˆÙŠØ© Ù„Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ (Grafico): ${graficoValue}
                Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù…Ø­ØªÙ…Ù„Ø© (Posivel): ${posivelValue}
                ÙØ¦Ø© Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©: ${currentResultCategory === "Rosa" ? "ÙˆØ±Ø¯ÙŠ (Ø¥ÙŠØ¬Ø§Ø¨ÙŠ)" : "Ø¢Ø®Ø± (Ù‚Ø¯ ÙŠÙƒÙˆÙ† Ø®Ø·ÙŠØ±Ù‹Ø§)"}

                Ø§Ø¬Ø¹Ù„ Ø§Ù„ØªÙˆÙ‚Ø¹ ÙÙŠ Ø­Ø¯ÙˆØ¯ 50 ÙƒÙ„Ù…Ø©ØŒ Ù…Ø¹ Ø§Ù„ØªØ±ÙƒÙŠØ² Ø¹Ù„Ù‰ Ø§Ø­ØªÙ…Ø§Ù„ÙŠØ© Ø§Ù„Ø§Ø±ØªÙØ§Ø¹ Ø£Ùˆ Ø§Ù„Ø§Ù†Ø®ÙØ§Ø¶ Ø£Ùˆ Ø§Ù„Ø§Ø³ØªÙ‚Ø±Ø§Ø±ØŒ ÙˆØ¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„ÙØµØ­Ù‰.
            `;

            let chatHistory = [];
            chatHistory.push({ role: "user", parts: [{ text: prompt }] });

            const payload = { contents: chatHistory };
            const apiKey = "";
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const result = await response.json();

                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const text = result.candidates[0].content.parts[0].text;
                    futurePredictionOutput.innerText = text;
                } else {
                    futurePredictionOutput.innerText = "Ø¹Ø°Ø±Ù‹Ø§ØŒ Ù„Ù… ÙŠØªÙ…ÙƒÙ† Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù…Ù† ØªÙ‚Ø¯ÙŠÙ… ØªÙˆÙ‚Ø¹Ø§Øª Ø­Ø§Ù„ÙŠÙ‹Ø§. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.";
                    console.error("Gemini API response structure unexpected:", result);
                }
            } catch (error) {
                futurePredictionOutput.innerText = "Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§ØªØµØ§Ù„Ùƒ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª ÙˆØ§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.";
                console.error("Error calling Gemini API:", error);
            } finally {
                futurePredictionButton.disabled = false;
                futurePredictionButtonText.classList.remove("hidden");
                futurePredictionLoadingSpinner.classList.add("hidden");
            }
        }

        /**
         * Dismisses the warning modal and shows the main content.
         */
        function dismissWarning() {
            const warningModal = document.getElementById('warning-modal');
            const mainContent = document.getElementById('main-content');
            const huntIdInput = document.getElementById('huntIdInput');
            const huntIdDisplay = document.getElementById('huntIdDisplay');

            warningModal.classList.remove('show');
            warningModal.classList.add('hidden');

            mainContent.classList.remove('hidden');
            mainContent.classList.add('flex');
            mainContent.classList.add('fade-slide-in-active');
            document.body.style.overflow = 'auto';

            // Display the entered Hunt ID
            const enteredId = huntIdInput.value.trim();
            if (enteredId) {
                huntIdDisplay.innerText = `ID: ${enteredId}`;
            } else {
                huntIdDisplay.innerText = `ID: ØºÙŠØ± Ù…Ø­Ø¯Ø¯`; // "ID: Undefined"
            }


            // Initialize result fields to default "---" state
            document.getElementById("saida").innerText = "---";
            document.getElementById("grafico").innerText = "---";
            document.getElementById("result-icon").style.display = 'none'; // Hide icon initially
            document.getElementById("posivel").innerText = "---";
            document.getElementById("protecao").innerText = "---";

            // Initialize the refresh button state
            updateRefreshButtonState();
        }

        // Splash screen and Warning Modal logic
        document.addEventListener('DOMContentLoaded', () => {
            const splashScreen = document.getElementById('splash-screen');
            const warningModal = document.getElementById('warning-modal');

            setTimeout(() => {
                splashScreen.style.opacity = '0';
                setTimeout(() => {
                    splashScreen.classList.add('hidden');
                    warningModal.classList.remove('hidden');
                    warningModal.classList.add('show');
                }, 700);
            }, 3000);
        });
    </script>
</body>
</html>
Ù‡Ø°Ø§ ÙƒÙˆØ¯ Ø®Ø§Øµ Ø¨Ù…ÙˆÙ‚Ø¹ÙŠ Ø§Ø±ÙŠØ¯ Ø¨Ø¹Ø¶ ØªØºØºÙŠØ±Ø§Øª
